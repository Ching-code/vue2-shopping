(function(){"use strict";var t={7005:function(t,s,a){var e=a(6848),i=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},o=[],n=a(1656),r={},c=(0,n.A)(r,i,o,!1,null,null,null),l=c.exports,d=a(6178),u=a(3518);const v="shopping_info",m="history_list",p=()=>{const t={token:"",userId:""},s=localStorage.getItem(v);return s?JSON.parse(s):t},h=t=>{localStorage.setItem(v,JSON.stringify(t))},g=()=>{const t=localStorage.getItem(m);return t?JSON.parse(t):[]},_=t=>{localStorage.setItem(m,JSON.stringify(t))};var C={namespaced:!0,state(){return{userInfo:p()}},mutations:{setUserInfo(t,s){t.userInfo=s,h(s)}},actions:{logout(t){t.commit("setUserInfo",{}),t.commit("cart/setCartList",[],{root:!0})}},getters:{}},f=(a(9704),a(1981)),y=a(4373);const k=y.A.create({baseURL:"https://smart-shop.itheima.net/index.php?s=/api",timeout:5e3,headers:{platform:"H5"}});k.interceptors.request.use((function(t){f.A.loading({message:"載入中...",forbidClick:!0,loadingType:"spinner",duration:0});const s=L.getters.token;return s&&(t.headers["Access-Token"]=s,t.headers.platform="H5"),t}),(function(t){return Promise.reject(t)})),k.interceptors.response.use((function(t){const s=t.data;return 200!==s.status?(f.A.fail(s.message),Promise.reject(s.message)):(f.A.clear(),s)}),(function(t){return Promise.reject(t)}));var b=k;const x=(t,s,a)=>b.post("/cart/add",{goodsId:t,goodsNum:s,goodsSkuId:a}),A=()=>b.get("/cart/list"),I=(t,s,a)=>b.post("/cart/update",{goodsId:t,goodsNum:s,goodsSkuId:a}),w=t=>b.post("/cart/clear",{cartIds:t});var $={namespaced:!0,state(){return{cartList:[]}},mutations:{setCartList(t,s){t.cartList=s},toggleCheck(t,s){const a=t.cartList.find((t=>t.goods_id===s));a.isChecked=!a.isChecked},toggleAllCheck(t,s){t.cartList.forEach((t=>{t.isChecked=s}))},changeCount(t,{goods_id:s,goodsNum:a}){const e=t.cartList.find((t=>t.goods_id===s));e.goods_num=a}},actions:{async getCartAction(t){const{data:s}=await A();s.list.forEach((t=>{t.isChecked=!0})),t.commit("setCartList",s.list)},async changeCountAction(t,s){const{goodsNum:a,goods_id:e,goods_sku_id:i}=s;t.commit("changeCount",{goods_id:e,goodsNum:a}),await I(e,a,i)},async deleteSelectedCartItemAction(t){const s=t.getters.selectedCartList,a=s.map((t=>t.id));await w(a),t.dispatch("getCartAction").then((()=>{(0,f.A)("刪除成功")}))}},getters:{cartTotal(t){return t.cartList.reduce(((t,s)=>t+s.goods_num),0)},selectedCartList(t){return t.cartList.filter((t=>t.isChecked))},selectedCount(t,s){return s.selectedCartList.reduce(((t,s)=>t+s.goods_num),0)},selectedTotalPrice(t,s){return s.selectedCartList.reduce(((t,s)=>t+s.goods_num*s.goods.goods_price_min),0).toFixed(2)},isAllChecked(t){return t.cartList.every((t=>t.isChecked))}}};e.Ay.use(u.Ay);var L=new u.Ay.Store({state:{},getters:{token(t){return t.user.userInfo.token}},mutations:{},actions:{},modules:{user:C,cart:$}}),S=function(){var t=this,s=t._self._c;return s("div",{staticClass:"login"},[s("van-nav-bar",{attrs:{title:"會員登入","left-arrow":""},on:{"click-left":t.goBack}}),s("div",{staticClass:"container"},[t._m(0),s("form",{staticClass:"form",attrs:{action:""}},[s("div",{staticClass:"form-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"phone",attrs:{type:"phone",maxlength:"11",placeholder:"請輸入手機號碼"},domProps:{value:t.phone},on:{input:function(s){s.target.composing||(t.phone=s.target.value)}}})]),s("div",{staticClass:"form-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.imgCode,expression:"imgCode"}],staticClass:"valid",attrs:{type:"text",maxlength:"5",placeholder:"請輸入圖形驗證碼"},domProps:{value:t.imgCode},on:{input:function(s){s.target.composing||(t.imgCode=s.target.value)}}}),t.imgUrl?s("img",{staticClass:"refresh",attrs:{src:a(8995)},on:{click:t.getImgCode}}):t._e(),t.imgUrl?s("img",{attrs:{src:t.imgUrl,alt:""}}):t._e()]),s("div",{staticClass:"form-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],staticClass:"valid",attrs:{type:"text",placeholder:"請輸入手機驗證碼"},domProps:{value:t.smsCode},on:{input:function(s){s.target.composing||(t.smsCode=s.target.value)}}}),s("button",{staticClass:"valid-btn",on:{click:t.getValidCode}},[t._v(" "+t._s(t.second===t.totalSecond?"獲取驗證碼":t.second+"秒後重新發送")+" ")])])]),s("button",{staticClass:"login-btn",on:{click:t.login}},[t._v("登入")])])],1)},N=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"title"},[s("h3",[t._v("手機登入")]),s("p",[t._v("未註冊的手機號碼將自動註冊")])])}];const P=()=>b.get("/captcha/image"),T=(t,s,a)=>b.post("/captcha/sendSmsCaptcha",{form:{captchaCode:t,captchaKey:s,mobile:a}}),O=(t,s)=>b.post("/passport/login",{form:{isParty:!1,partyData:{},mobile:t,smsCode:s}});var U={name:"LoginIndex",data(){return{imgCode:"",imgKey:"",imgUrl:"",totalSecond:10,second:10,timer:null,phone:"",smsCode:""}},methods:{async getImgCode(){const{data:{base64:t,key:s}}=await P();this.imgUrl=t,this.imgKey=s},async getValidCode(){this.validation()&&(this.timer||this.second!==this.totalSecond||(await T(this.imgCode,this.imgKey,this.phone),this.$toast("手機驗證碼已發送，注意簡訊訊息"),this.timer=setInterval((()=>{this.second--,this.second<=0&&(clearInterval(this.timer),this.timer=null,this.second=this.totalSecond)}),1e3)))},validation(){return/^1[3-9]\d{9}$/.test(this.phone)?!!/^\w{4}$/.test(this.imgCode)||(this.$toast("圖形驗證碼格式錯誤"),!1):(this.$toast("請輸入正確的手機號碼"),!1)},goBack(){const t=this.$route.query.backUrl||"/";this.$router.replace(t)},async login(){if(!this.validation())return;const t=await O(this.phone,this.smsCode);this.$store.commit("user/setUserInfo",t.data),this.$toast("登入成功");const s=this.$route.query.backUrl||"/";this.$router.replace(s)}},created(){this.getImgCode()},destroyed(){clearInterval(this.timer)}},q=U,j=(0,n.A)(q,S,N,!1,null,"5d47dbaa",null),D=j.exports,E=function(){var t=this,s=t._self._c;return s("div",[s("router-view"),s("van-tabbar",{attrs:{route:"","active-color":"#ee0a24","inactive-color":"#000"}},[s("van-tabbar-item",{attrs:{to:"/home",icon:"home-o"}},[t._v("首頁")]),s("van-tabbar-item",{attrs:{to:"/category",icon:"apps-o"}},[t._v("分類頁")]),s("van-tabbar-item",{attrs:{to:"/cart",icon:"shopping-cart-o"}},[t._v("購物車")]),s("van-tabbar-item",{attrs:{to:"/user",icon:"user-o"}},[t._v("個人")])],1)],1)},B=[],V={name:"LayoutIndex"},X=V,H=(0,n.A)(X,E,B,!1,null,null,null),M=H.exports,z=function(){var t=this,s=t._self._c;return s("div",{staticClass:"search"},[s("van-nav-bar",{attrs:{title:"商品搜索","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-search",{attrs:{"show-action":"",placeholder:"輸入搜索關鍵詞",clearable:""},scopedSlots:t._u([{key:"action",fn:function(){return[s("div",{on:{click:function(s){return t.goSearch(t.searchValue)}}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.searchValue,callback:function(s){t.searchValue="string"===typeof s?s.trim():s},expression:"searchValue"}}),t.history.length>0?s("div",{staticClass:"search-history"},[s("div",{staticClass:"title"},[s("span",[t._v("最近搜索")]),s("van-icon",{attrs:{name:"delete-o",siz:"16"},on:{click:t.clearHistory}})],1),s("div",{staticClass:"list"},t._l(t.history,(function(a){return s("div",{key:a,staticClass:"list-item",on:{click:function(s){return t.goSearch(a)}}},[t._v(" "+t._s(a)+" ")])})),0)]):t._e()],1)},G=[],J=(a(4114),{name:"SearchIndex",data(){return{searchValue:"",history:g()}},methods:{goSearch(t){t&&(this.history=this.history.filter((s=>s!==t)),this.history.unshift(t),_(this.history),this.searchValue="",this.$router.push(`/searchlist?search=${t}`))},clearHistory(){_([]),this.history=[]}}}),K=J,F=(0,n.A)(K,z,G,!1,null,"5e099209",null),R=F.exports,Q=function(){var t=this,s=t._self._c;return s("div",{staticClass:"search"},[s("van-nav-bar",{attrs:{fixed:"",title:"商品列表","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:t.querySearch||"搜索","show-action":""},on:{click:function(s){return t.$router.push("/search")}},scopedSlots:t._u([{key:"action",fn:function(){return[s("van-icon",{staticClass:"tool",attrs:{name:"apps-o"},on:{click:function(s){return t.$router.push("/category")}}})]},proxy:!0}])}),s("div",{staticClass:"sort-btns"},[s("div",{staticClass:"sort-item",on:{click:function(s){return t.getList()}}},[t._v("綜合")]),s("div",{staticClass:"sort-item",on:{click:function(s){return t.getList("sales")}}},[t._v("銷量")]),s("div",{staticClass:"sort-item",on:{click:function(s){return t.getList("price")}}},[t._v("價格")])]),s("div",{staticClass:"goods-list"},t._l(t.productList,(function(t){return s("GoodsItem",{key:t.goodsId,attrs:{item:t}})})),1)],1)},W=[],Y=function(){var t=this,s=t._self._c;return t.item.goods_id?s("div",{staticClass:"goods-item",on:{click:function(s){return t.$router.push(`/product/${t.item.goods_id}`)}}},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.item.goods_image,alt:""}})]),s("div",{staticClass:"right"},[s("p",{staticClass:"tit text-ellipsis-2"},[t._v(t._s(t.item.goods_name))]),s("p",{staticClass:"count"},[t._v("已售 "+t._s(t.item.goods_sales)+" 件")]),s("p",{staticClass:"price"},[s("span",{staticClass:"new"},[t._v("$"+t._s(t.item.goods_price_min))]),s("span",{staticClass:"old"},[t._v("$"+t._s(t.item.goods_price_max))])])])]):t._e()},Z=[],tt={props:{item:{type:Object,default:()=>{}}}},st=tt,at=(0,n.A)(st,Y,Z,!1,null,"5dbd9b8c",null),et=at.exports;const it=t=>{const{sortType:s,categoryId:a,goodsName:e,page:i}=t;return b.get("/goods/list",{params:{sortType:s,categoryId:a,goodsName:e,page:i}})},ot=t=>b.get("/goods/detail",{params:{goodsId:t}}),nt=(t,s)=>b.get("/comment/listRows",{params:{goodsId:t,limit:s}});var rt={name:"SearchListIndex",components:{GoodsItem:et},data(){return{page:1,productList:[]}},computed:{querySearch(){return this.$route.query.search}},created(){this.getList()},methods:{async getList(t){const{data:{list:s}}=await it({categoryId:this.$route.query.categoryId,sortType:t,goodsName:this.querySearch,page:this.page});this.productList=s.data}}},ct=rt,lt=(0,n.A)(ct,Q,W,!1,null,"7bbdaa90",null),dt=lt.exports,ut=function(){var t=this,s=t._self._c;return s("div",{staticClass:"product_detail"},[s("van-nav-bar",{attrs:{title:"商品詳情","left-arrow":"",fixed:""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-swipe",{attrs:{autoplay:3e3},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[s("div",{staticClass:"custom-indicator"},[t._v(t._s(t.current+1)+" / "+t._s(t.images.length))])]},proxy:!0}])},t._l(t.images,(function(t){return s("van-swipe-item",{key:t.file_id},[s("img",{attrs:{src:t.external_url,alt:""}})])})),1),s("div",{staticClass:"info"},[s("div",{staticClass:"title"},[s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("$"+t._s(t.detail.goods_price_min))]),s("span",{staticClass:"old"},[t._v("$"+t._s(t.detail.goods_price_max))])]),s("div",{staticClass:"sellcount"},[t._v("已售 "+t._s(t.detail.goods_sales)+" 件")])]),s("div",{staticClass:"msg text-ellipsis-2"},[t._v(t._s(t.detail.goods_name))]),s("div",{staticClass:"service"},[s("div",{staticClass:"left-words"},[s("span",[s("van-icon",{attrs:{name:"passed"}}),t._v("七天無理由退貨")],1),s("span",[s("van-icon",{attrs:{name:"passed"}}),t._v("48小時發貨")],1)]),s("div",{staticClass:"right-icon"},[s("van-icon",{attrs:{name:"arrow"}})],1)])]),s("div",{staticClass:"comment"},[s("div",{staticClass:"comment-title"},[s("div",{staticClass:"left"},[t._v("商品評價 "+t._s(t.total)+" 條")]),s("div",{staticClass:"right"},[t._v("查看更多"),s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"comment-list"},t._l(t.commentList,(function(a){return s("div",{key:a.comment_id,staticClass:"comment-item"},[s("div",{staticClass:"top"},[s("img",{attrs:{src:a.user.avatar_url||t.defaultAvatar,alt:""}}),s("div",{staticClass:"name"},[t._v(t._s(a.user.nick_name))])]),s("van-rate",{attrs:{size:16,value:a.score/2,color:"#ffd21e","void-icon":"star","void-color":"#eee"}}),s("div",{staticClass:"content"},[t._v(t._s(a.content))]),s("div",{staticClass:"time"},[t._v(t._s(a.create_time))])],1)})),0)]),s("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.detail.content)}}),s("div",{staticClass:"footer"},[s("div",{staticClass:"icon-home",on:{click:function(s){return t.$router.push("/")}}},[s("van-icon",{attrs:{name:"wap-home-o"}}),s("span",[t._v("首頁")])],1),s("div",{staticClass:"icon-cart",on:{click:function(s){return t.$router.push("/cart")}}},[s("span",{staticClass:"num"}),0===t.cartTotal?s("van-icon",{attrs:{name:"shopping-cart-o"}}):s("van-icon",{attrs:{name:"shopping-cart-o",badge:t.cartTotal}}),s("span",[t._v("購物車")])],1),s("button",{staticClass:"btn-add",on:{click:t.addCartAction}},[t._v("加入購物車")]),s("button",{staticClass:"btn-buy",on:{click:t.buyNowAction}},[t._v("直接購買")])]),s("van-action-sheet",{attrs:{title:"cart"===t.mode?"加入購物車":"直接購買"},model:{value:t.showPannel,callback:function(s){t.showPannel=s},expression:"showPannel"}},[s("div",{staticClass:"product"},[s("div",{staticClass:"product-title"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.detail.goods_image,alt:""}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"price"},[s("span",[t._v("$")]),s("span",{staticClass:"nowprice"},[t._v(t._s(t.detail.goods_price_min))])]),s("div",{staticClass:"count"},[s("span",[t._v("庫存")]),s("span",[t._v(t._s(t.detail.stock_total))])])])]),s("div",{staticClass:"num-box"},[s("span",[t._v("數量")]),s("CountBox",{model:{value:t.addCount,callback:function(s){t.addCount=s},expression:"addCount"}})],1),t.detail.stock_total>0?s("div",{staticClass:"showbtn"},["cart"===t.mode?s("div",{staticClass:"btn",on:{click:t.addCart}},[t._v("加入購物車")]):s("div",{staticClass:"btn now",on:{click:t.buyNow}},[t._v("立即購買")])]):s("div",{staticClass:"btn-done"},[t._v("商品已售完")])])])],1)},vt=[],mt=a(140),pt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"count-box"},[s("button",{staticClass:"minus",on:{click:function(s){return t.handleMinus()}}},[t._v("-")]),s("input",{staticClass:"input",attrs:{type:"number",inputmode:"numeric"},domProps:{value:t.value},on:{change:t.handleChange}}),s("button",{staticClass:"add",on:{click:function(s){return t.handleAdd()}}},[t._v("+")])])},ht=[],gt={props:{value:{type:Number,default:1}},methods:{handleMinus(){this.value<=1||this.$emit("input",this.value-1)},handleAdd(){this.$emit("input",this.value+1)},handleChange(t){const s=+t.target.value;isNaN(s)||s<0||!Number.isInteger(s)?t.target.value=this.value:this.$emit("input",s)}}},_t=gt,Ct=(0,n.A)(_t,pt,ht,!1,null,"c5612560",null),ft=Ct.exports,yt={methods:{loginConfirm(){return!this.$store.getters.token&&(this.$dialog.confirm({title:"提示",message:"需要登入",confirmButtonText:"去登入",cancelButtonText:"再逛逛"}).then((()=>{this.$router.replace({path:"/login",query:{backUrl:this.$route.fullPath}})})).catch((()=>{this.$router.replace("/")})),!0)}}},kt={name:"ProductIndex",components:{CountBox:ft},mixins:[yt],data(){return{images:[],current:0,detail:{},total:0,commentList:[],defaultAvatar:mt,showPannel:!1,mode:"cart",addCount:1,cartTotal:0}},computed:{goodsId(){return this.$route.params.id}},methods:{onChange(t){this.current=t},async getDetail(){const{data:{detail:t}}=await ot(this.goodsId);this.detail=t,this.images=t.goods_images},async getComment(){const{data:{list:t,total:s}}=await nt(this.goodsId,5);this.commentList=t,this.total=s},addCartAction(){this.mode="cart",this.showPannel=!0},buyNowAction(){this.mode="buyNow",this.showPannel=!0},async addCart(){if(this.loginConfirm())return;const{data:t}=await x(this.goodsId,this.addCount,this.detail.skuList[0].goods_sku_id);this.cartTotal=t.cartTotal,this.$toast("成功加入購物車"),this.showPannel=!1},buyNow(){this.loginConfirm()||this.$router.push({path:"/pay",query:{mode:"buyNow",goodsId:this.goodsId,goodsSkuId:this.detail.skuList[0].goods_sku_id,goodsNum:this.addCount}})}},created(){this.getDetail(),this.getComment()}},bt=kt,xt=(0,n.A)(bt,ut,vt,!1,null,"21d07962",null),At=xt.exports,It=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pay"},[s("van-nav-bar",{attrs:{title:"訂單結算",fixed:"","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("div",{staticClass:"address"},[s("div",{staticClass:"left-icon"},[s("van-icon",{attrs:{name:"logistics"}})],1),t._m(0),s("div",{staticClass:"right-icon"},[s("van-icon",{attrs:{name:"arrow"}})],1)]),t.order.goodsList?s("div",{staticClass:"pay-list"},[s("div",{staticClass:"list"},t._l(t.order.goodsList,(function(a){return s("div",{key:a.goods_id,staticClass:"goods-item"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:a.goods_image,alt:""}})]),s("div",{staticClass:"right"},[s("p",{staticClass:"tit text-ellipsis-2"},[t._v(t._s(a.goods_name))]),s("p",{staticClass:"info"},[s("span",{staticClass:"count"},[t._v(t._s(a.total_num))]),s("span",{staticClass:"price"},[t._v(t._s(a.total_pay_price))])])])])})),0),s("div",{staticClass:"flow-num-box"},[s("span",[t._v("共 "+t._s(t.order.orderTotalNum)+" 件商品 合計: ")]),s("span",{staticClass:"money"},[t._v("$ "+t._s(t.order.orderTotalPrice))])]),s("div",{staticClass:"pay-detail"},[s("div",{staticClass:"pay-cell"},[s("span",[t._v("總金額: ")]),s("span",{staticClass:"red"},[t._v("$ "+t._s(t.order.orderTotalPrice))])]),t._m(1),t._m(2)]),s("div",{staticClass:"pay-way"},[s("span",{staticClass:"tit"},[t._v("支付方式")]),s("div",{staticClass:"pay-cell"},[s("span",[s("van-icon",{attrs:{name:"balance-o"}}),t._v("餘額支付 (可用 $ "+t._s(t.personal.balance)+" 元)")],1),s("span",{staticClass:"red"},[s("van-icon",{attrs:{name:"passed"}})],1)])]),s("div",{staticClass:"buytips"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{placeholder:"留言",name:"",id:"",cols:"30",rows:"30"},domProps:{value:t.remark},on:{input:function(s){s.target.composing||(t.remark=s.target.value)}}})])]):t._e(),s("div",{staticClass:"footer-fixed"},[s("div",{staticClass:"left"},[t._v(" 實付: "),s("span",[t._v("$ "+t._s(t.order.orderTotalPrice))])]),s("div",{staticClass:"tipsbtn",on:{click:t.submitOrder}},[t._v("提交訂單")])])],1)},wt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"info"},[s("div",{staticClass:"info-content"},[s("span",{staticClass:"name"},[t._v("小姐")]),s("span",{staticClass:"mobile"},[t._v("00000000")])]),s("div",{staticClass:"info-address"},[t._v("XX市XX區XX路XX號")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"pay-cell"},[s("span",[t._v("優惠券: ")]),s("span",[t._v("無優惠券可用")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"pay-cell"},[s("span",[t._v("配送費用: ")]),s("span",[t._v("請先選擇配送地址")]),s("span",{staticClass:"red"},[t._v("$1000")])])}];const $t=(t,s)=>b.get("/checkout/order",{params:{mode:t,delivery:10,couponId:0,isUsePoints:0,...s}}),Lt=(t,s)=>b.post("/checkout/submit",{mode:t,delivery:10,couponId:0,isUsePoints:0,payType:10,...s}),St=(t,s)=>b.get("/order/list",{params:{dataType:t,page:s}});var Nt={name:"PayIndex",data(){return{order:{},personal:{},remark:""}},computed:{mode(){return this.$route.query.mode},cartIds(){return this.$route.query.cartIds},goodsId(){return this.$route.query.goodsId},goodsSkuId(){return this.$route.query.goodsSkuId},goodsNum(){return this.$route.query.goodsNum}},methods:{async getOrderList(){if("cart"===this.mode){const{data:{order:t,personal:s}}=await $t(this.mode,{cartIds:this.cartIds});this.order=t,this.personal=s}if("buyNow"===this.mode){const{data:{order:t,personal:s}}=await $t(this.mode,{goodsId:this.goodsId,goodsSkuId:this.goodsSkuId,goodsNum:this.goodsNum});this.order=t,this.personal=s}},async submitOrder(){"cart"===this.mode&&await Lt(this.mode,{cartIds:this.cartIds,remark:this.remark}),"buyNow"===this.mode&&await Lt(this.mode,{goodsId:this.goodsId,goodsSkuId:this.goodsSkuId,goodsNum:this.goodsNum,remark:this.remark}),this.$toast("付款成功"),this.$router.replace("/order")}},created(){this.getOrderList()}},Pt=Nt,Tt=(0,n.A)(Pt,It,wt,!1,null,"11599c7a",null),Ot=Tt.exports,Ut=function(){var t=this,s=t._self._c;return s("div",{staticClass:"order"},[s("van-nav-bar",{attrs:{title:"我的訂單",fixed:"","left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),s("van-tabs",{attrs:{sticky:""},model:{value:t.active,callback:function(s){t.active=s},expression:"active"}},[s("van-tab",{attrs:{name:"all",title:"全部"}}),s("van-tab",{attrs:{name:"payment",title:"待支付"}}),s("van-tab",{attrs:{name:"delivery",title:"待發貨"}}),s("van-tab",{attrs:{name:"received",title:"待收貨"}}),s("van-tab",{attrs:{name:"comment",title:"待評價"}})],1),t._l(t.list,(function(t){return s("OrderListItem",{key:t.order_id,attrs:{item:t}})}))],2)},qt=[],jt=function(){var t=this,s=t._self._c;return t.item.order_id?s("div",{staticClass:"order-list-item"},[s("div",{staticClass:"tit"},[s("div",{staticClass:"time"},[t._v(t._s(t.item.create_time))]),s("div",{staticClass:"status"},[s("span",[t._v(t._s(t.item.state_text))])])]),s("div",{staticClass:"list"},t._l(t.item.goods,(function(a,e){return s("div",{key:e,staticClass:"list-item"},[s("div",{staticClass:"goods-image"},[s("img",{attrs:{src:a.goods_image,alt:""}})]),s("div",{staticClass:"goods-content tex-ellipsis-2"},[t._v(" "+t._s(a.goods_name)+" ")]),s("div",{staticClass:"goods-trade"},[s("p",[t._v("$ "+t._s(a.total_pay_price))]),s("p",[t._v("x "+t._s(a.total_num))])])])})),0),s("div",{staticClass:"total"},[t._v("共 "+t._s(t.item.total_num)+" 件商品，總金額 $ "+t._s(t.item.total_price)+" 元")]),s("div",{staticClass:"actions"},[10===t.item.order_status?s("div",[10===t.item.pay_status?s("span",[t._v("立刻付款")]):10===t.item.delivery_status?s("span",[t._v("申請取消")]):20===t.item.delivery_status||30===t.item.delivery_status?s("span",[t._v("確認收貨")]):t._e()]):t._e(),30===t.item.order_status?s("div",[s("span",[t._v("評價")])]):t._e()])]):t._e()},Dt=[],Et={props:{item:{type:Object,default:()=>({})}}},Bt=Et,Vt=(0,n.A)(Bt,jt,Dt,!1,null,"726f0207",null),Xt=Vt.exports,Ht={name:"OrderIndex",components:{OrderListItem:Xt},mixins:[yt],data(){return{active:this.$route.query.dataType||"all",page:1,list:[]}},methods:{async getOrderList(){if(this.loginConfirm())return;const{data:{list:t}}=await St(this.active,this.page);t.data.forEach((t=>{t.total_num=0,t.goods.forEach((s=>{t.total_num+=s.total_num}))})),this.list=t.data}},watch:{active:{immediate:!0,handler(){this.getOrderList()}}}},Mt=Ht,zt=(0,n.A)(Mt,Ut,qt,!1,null,"6c8c7731",null),Gt=zt.exports,Jt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"home"},[s("van-nav-bar",{attrs:{title:"商城首頁",fixed:""}}),s("van-search",{attrs:{shape:"round"},on:{click:function(s){return t.$router.push("/search")}}}),s("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"#ccc"}},t._l(t.swipeData,(function(t){return s("van-swipe-item",{key:t.imgUrl},[s("img",{attrs:{src:t.imgUrl,alt:""}})])})),1),s("van-grid",{attrs:{"column-num":"5","icon-size":"40"}},t._l(t.gridData,(function(t){return s("van-grid-item",{key:t.imgUrl,attrs:{icon:t.imgUrl,text:t.text}})})),1),s("div",{staticClass:"main"},[s("img",{attrs:{src:t.mainImgUrl,alt:""}})]),t.isLoaded?s("div",{staticClass:"guess"},[s("p",{staticClass:"guess-title"},[t._v("--猜你喜歡--")]),s("div",{staticClass:"good-list"})]):t._e(),t._l(t.goods,(function(t){return s("GoodsItem",{key:t.goods_id,attrs:{item:t}})}))],2)},Kt=[];const Ft=()=>b.get("/page/detail",{params:{pageId:0}});var Rt={components:{GoodsItem:et},name:"HomeIndex",data(){return{swipeData:[],gridData:[],mainImgUrl:"",goods:[],isLoaded:!1}},async created(){const{data:{pageData:t}}=await Ft();this.isLoaded=!0,this.swipeData=t.items[1].data,this.gridData=t.items[3].data,this.mainImgUrl=t.items[4].data[0].imgUrl,this.goods=t.items[6].data}},Qt=Rt,Wt=(0,n.A)(Qt,Jt,Kt,!1,null,"1949c713",null),Yt=Wt.exports,Zt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"category"},[s("van-nav-bar",{attrs:{title:"全部分類",fixed:""}}),s("van-search",{attrs:{readonly:"",shape:"round",background:"#f1f1f2",placeholder:"輸入搜尋關鍵字"},on:{click:function(s){return t.$router.push("/search")}}}),s("div",{staticClass:"list-box"},[s("div",{staticClass:"left"},[s("ul",t._l(t.list,(function(a,e){return s("li",{key:a.category_id},[s("a",{class:{active:e===t.activeIndex},attrs:{href:"javascript:;"},on:{click:function(s){t.activeIndex=e}}},[t._v(" "+t._s(a.name)+" ")])])})),0)]),s("div",{staticClass:"right"},t._l(t.list[t.activeIndex]?.children,(function(a){return s("div",{key:a.category_id,staticClass:"cate-goods",on:{click:function(s){return t.$router.push(`/searchlist?categoryId=${a.category_id}`)}}},[s("img",{attrs:{src:a.image?.external_url,alt:""}}),s("p",[t._v(t._s(a.name))])])})),0)])],1)},ts=[];const ss=()=>b.get("/category/list");var as={name:"CategoryIndex",created(){this.getCategoryList()},data(){return{list:[],activeIndex:0}},methods:{async getCategoryList(){const{data:{list:t}}=await ss();this.list=t}}},es=as,is=(0,n.A)(es,Zt,ts,!1,null,"3878f97e",null),os=is.exports,ns=function(){var t=this,s=t._self._c;return s("div",{staticClass:"cart"},[s("van-nav-bar",{attrs:{title:"購物車",fixed:""}}),t.isLogin&&t.cartList.length>0?s("div",[s("div",{staticClass:"cart-title"},[s("span",{staticClass:"all"},[t._v("共"),s("i",[t._v(t._s(t.cartTotal))]),t._v("件商品")]),s("span",{staticClass:"edit",on:{click:function(s){t.isEdit=!t.isEdit}}},[s("van-icon",{attrs:{name:"edit"}}),t._v("編輯")],1)]),s("div",{staticClass:"cart-list"},t._l(t.cartList,(function(a){return s("div",{key:a.goods_id,staticClass:"cart-item"},[s("van-checkbox",{attrs:{value:a.isChecked},on:{click:function(s){return t.toggleCheck(a.goods_id)}}}),s("div",{staticClass:"show"},[s("img",{attrs:{src:a.goods.goods_image,alt:""}})]),s("div",{staticClass:"info"},[s("span",{staticClass:"tit text-ellipsis-2"},[t._v(t._s(a.goods.goods_name))]),s("span",{staticClass:"bottom"},[s("div",{staticClass:"price"},[t._v(" $ "),s("span",[t._v(t._s(a.goods.goods_price_min))])]),s("CountBox",{attrs:{value:a.goods_num},on:{input:s=>t.changeCount(s,a.goods_id,a.goods_sku_id)}})],1)])],1)})),0),s("div",{staticClass:"footer-fixed"},[s("div",{staticClass:"all-check",on:{click:t.toggleAllCheck}},[s("van-checkbox",{attrs:{value:t.isAllChecked,"icon-size":"18"}}),t._v(" 全選 ")],1),s("div",{staticClass:"all-total"},[s("div",{staticClass:"price"},[s("span",[t._v("合計")]),s("span",[t._v("$ "),s("i",{staticClass:"totalPrice"},[t._v(t._s(t.selectedTotalPrice))])])]),t.isEdit?s("div",{staticClass:"delete",class:{disabled:0===t.selectedCount},on:{click:t.handleDelete}},[t._v("刪除")]):s("div",{staticClass:"goPay",class:{disabled:0===t.selectedCount},on:{click:t.goPay}},[t._v(" 結算("+t._s(t.selectedCount)+") ")])])])]):s("div",{staticClass:"empty-cart"},[s("img",{staticClass:"empty-cart-img",attrs:{src:a(4926),alt:""}}),s("div",{staticClass:"tips"},[t._v("購物車是空的")]),s("div",{staticClass:"btn",on:{click:function(s){return t.$router.push("/")}}},[t._v("去逛逛")])])],1)},rs=[],cs={name:"CartIndex",components:{CountBox:ft},data(){return{isEdit:!1}},methods:{toggleCheck(t){this.$store.commit("cart/toggleCheck",t)},toggleAllCheck(){this.$store.commit("cart/toggleAllCheck",!this.isAllChecked)},changeCount(t,s,a){this.$store.dispatch("cart/changeCountAction",{goodsNum:t,goods_id:s,goods_sku_id:a})},handleDelete(){0!==this.selectedCount&&this.$store.dispatch("cart/deleteSelectedCartItemAction").then((()=>{this.isEdit=!1}))},goPay(){this.selectedCount>0&&this.$router.push({path:"/pay",query:{mode:"cart",cartIds:this.selectedCartList.map((t=>t.id)).join(",")}})}},computed:{...(0,u.aH)("cart",["cartList"]),...(0,u.L8)("cart",["cartTotal","selectedCartList","selectedCount","selectedTotalPrice","isAllChecked"]),isLogin(){return this.$store.getters.token}},watch:{isEdit(t){t?this.$store.commit("cart/toggleAllCheck",!1):this.$store.commit("cart/toggleAllCheck",!0)}},created(){this.isLogin&&this.$store.dispatch("cart/getCartAction")}},ls=cs,ds=(0,n.A)(ls,ns,rs,!1,null,"6b930248",null),us=ds.exports,vs=function(){var t=this,s=t._self._c;return s("div",{staticClass:"user"},[t.isLogin?s("div",{staticClass:"head-page"},[t._m(0),s("div",{staticClass:"info"},[s("div",{staticClass:"mobile"},[t._v(t._s(t.detail.mobile))]),s("div",{staticClass:"vip"},[s("van-icon",{attrs:{name:"diamond-o"}},[t._v("普通會員")])],1)])]):s("div",{staticClass:"head-page",on:{click:function(s){return t.$router.push("/login")}}},[t._m(1),t._m(2)]),s("div",{staticClass:"my-asset"},[s("div",{staticClass:"asset-left"},[s("div",{staticClass:"asset-left-item"},[s("span",[t._v(t._s(t.detail.balance||0))]),s("span",[t._v("帳戶餘額")])]),t._m(3),t._m(4)]),s("div",{staticClass:"asset-right"},[s("div",{staticClass:"asset-right-item"},[s("van-icon",{attrs:{name:"balance-pay"}}),s("span",[t._v("我的錢包")])],1)])]),s("div",{staticClass:"order-navbar"},[s("div",{staticClass:"order-navbar-item",on:{click:function(s){return t.$router.push("/order?dataType=all")}}},[s("van-icon",{attrs:{name:"balance-list-o"}}),s("span",[t._v("全部訂單")])],1),s("div",{staticClass:"order-navbar-item",on:{click:function(s){return t.$router.push("/order?dataType=payment")}}},[s("van-icon",{attrs:{name:"clock-o"}}),s("span",[t._v("待支付")])],1),s("div",{staticClass:"order-navbar-item",on:{click:function(s){return t.$router.push("/order?dataType=delivery")}}},[s("van-icon",{attrs:{name:"logistics"}}),s("span",[t._v("待發貨")])],1),s("div",{staticClass:"order-navbar-item",on:{click:function(s){return t.$router.push("/order?dataType=received")}}},[s("van-icon",{attrs:{name:"send-gift-o"}}),s("span",[t._v("待收貨")])],1)]),s("div",{staticClass:"service"},[s("div",{staticClass:"title"},[t._v("我的服務")]),s("div",{staticClass:"content"},[s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"records"}}),s("span",[t._v("收貨地址")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"gift-o"}}),s("span",[t._v("領券中心")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"gift-card-o"}}),s("span",[t._v("優惠券")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"question-o"}}),s("span",[t._v("我的幫助")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"balance-o"}}),s("span",[t._v("我的積分")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"refund-o"}}),s("span",[t._v("退貨/售後服務")])],1)])]),s("div",{staticClass:"logout-btn"},[s("button",{on:{click:t.logout}},[t._v("登出")])])])},ms=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"head-img"},[s("img",{attrs:{src:a(140),alt:""}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"head-img"},[s("img",{attrs:{src:a(140),alt:""}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"info"},[s("div",{staticClass:"mobile"},[t._v("未登入")]),s("div",{staticClass:"words"},[t._v("點擊登入")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"asset-left-item"},[s("span",[t._v("0")]),s("span",[t._v("積分")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"asset-left-item"},[s("span",[t._v("0")]),s("span",[t._v("優惠券")])])}];const ps=()=>b.get("user/info");var hs={name:"UserIndex",data(){return{detail:{}}},created(){this.isLogin&&this.getUserInfoDetail()},computed:{isLogin(){return this.$store.getters.token}},methods:{async getUserInfoDetail(){const{data:{userInfo:t}}=await ps();this.detail=t},logout(){this.$dialog.confirm({title:"提示",message:"確定要登出嗎?"}).then((()=>{this.$store.dispatch("user/logout")})).catch((()=>{}))}}},gs=hs,_s=(0,n.A)(gs,vs,ms,!1,null,"5826ae61",null),Cs=_s.exports;e.Ay.use(d.Ay);const fs=new d.Ay({routes:[{path:"/login",component:D},{path:"/",redirect:"/home",component:M,children:[{path:"/home",component:Yt},{path:"/category",component:os},{path:"/cart",component:us},{path:"/user",component:Cs}]},{path:"/search",component:R},{path:"/searchlist",component:dt},{path:"/product/:id",component:At},{path:"/pay",component:Ot},{path:"/order",component:Gt}]}),ys=["/pay","order"];fs.beforeEach(((t,s,a)=>{if(!ys.includes(t.path))return void a();const e=L.getters.token;e?a():a("/login")}));var ks=fs,bs=(a(2512),a(6852)),xs=(a(440),a(162)),As=(a(4534),a(5232)),Is=(a(4368),a(6885)),ws=(a(2636),a(6579)),$s=(a(9867),a(4648)),Ls=(a(9809),a(4365)),Ss=(a(3212),a(6874)),Ns=(a(9125),a(2665)),Ps=(a(9851),a(1431)),Ts=(a(7057),a(6749)),Os=(a(79),a(7235)),Us=(a(4537),a(8541)),qs=(a(6117),a(7555)),js=(a(3425),a(6141)),Ds=(a(7231),a(9363)),Es=(a(4510),a(1864));e.Ay.use(Es.A),e.Ay.use(Ds.A),e.Ay.use(js.A),e.Ay.use(qs.A),e.Ay.use(f.A),e.Ay.use(Us.A),e.Ay.use(Os.A),e.Ay.use(Ts.A),e.Ay.use(Ps.A),e.Ay.use(Ns.A),e.Ay.use(Ss.A),e.Ay.use(Ls.A),e.Ay.use($s.A),e.Ay.use(ws.A),e.Ay.use(Is.A),e.Ay.use(As.A),e.Ay.use(xs.A),e.Ay.use(bs.A),e.Ay.config.productionTip=!1,new e.Ay({router:ks,store:L,render:t=>t(l)}).$mount("#app")},140:function(t,s,a){t.exports=a.p+"img/defalutAvatar.d436515e.png"},4926:function(t,s,a){t.exports=a.p+"img/empty-cart.7f99720a.png"},8995:function(t,s,a){t.exports=a.p+"img/refresh.5be3436f.png"}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var o=s[e]={exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(s,e,i,o){if(!e){var n=1/0;for(d=0;d<t.length;d++){e=t[d][0],i=t[d][1],o=t[d][2];for(var r=!0,c=0;c<e.length;c++)(!1&o||n>=o)&&Object.keys(a.O).every((function(t){return a.O[t](e[c])}))?e.splice(c--,1):(r=!1,o<n&&(n=o));if(r){t.splice(d--,1);var l=i();void 0!==l&&(s=l)}}return s}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[e,i,o]}}(),function(){a.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(s,{a:s}),s}}(),function(){a.d=function(t,s){for(var e in s)a.o(s,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/vue2-shopping/"}(),function(){var t={524:0};a.O.j=function(s){return 0===t[s]};var s=function(s,e){var i,o,n=e[0],r=e[1],c=e[2],l=0;if(n.some((function(s){return 0!==t[s]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(c)var d=c(a)}for(s&&s(e);l<n.length;l++)o=n[l],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},e=self["webpackChunkvue2_shopping"]=self["webpackChunkvue2_shopping"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=a.O(void 0,[504],(function(){return a(7005)}));e=a.O(e)})();
//# sourceMappingURL=app.c9f11d2c.js.map